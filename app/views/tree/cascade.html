<style type="text/css">
    .intermediate {
        opacity: 0.3;
    }
</style>
<div class="tree">
    <ul>
        <li ng-repeat="country in vm.countries" ng-class="{closed:country.closed}">
            <div>
                <input type="checkbox" 
                        ng-model="country.checked" 
                        ng-change="vm.countryChanged(country)"
                        ng-class="{intermediate:vm.isIntermediateCountry(country)}">
                <span ng-click="country.closed=!country.closed">
                    <span class="glyphicon" ng-class="country.closed?'glyphicon-plus':'glyphicon-minus'"></span>
                    <img ng-src="images/{{country.flag}}"> {{country.label}}
                </span>
            </div>
            <ul ng-class="{hidden:country.closed}">
                <li ng-repeat="province in country.provinces" ng-class="{closed:province.closed}">
                    <input type="checkbox" 
                        ng-model="province.checked" 
                        ng-change="vm.provinceChanged(province,country)"
                        ng-class="{intermediate:vm.isIntermediateProvince(province)}">
                    <span ng-click="province.closed=!province.closed">
                        <span class="glyphicon" ng-class="province.closed?'glyphicon-plus':'glyphicon-minus'"></span>
                        {{country.label}}
                    </span>
                    <ul ng-class="{hidden:province.closed}">
                        <li ng-repeat="city in province.cities">
                            <label >
                                <input type="checkbox" ng-model="city.checked" ng-change="vm.cityChanged(city,province,country)" />
                                {{city.label}}
                            </label>
                        </li>
                    </ul>
                </li>
            </ul>
        </li>
    </ul>
</div>

